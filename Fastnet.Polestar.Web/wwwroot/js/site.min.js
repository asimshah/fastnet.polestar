var fastnet;!function(t){!function(){document.addEventListener("DOMContentLoaded",function(){n.addAll()})}();var e=function(){function t(){this.user=null,this.array=null,this.process=null}return t.prototype.forEach=function(t,e,n){var o=this;return this.array=t,this.process=e,this.user=n,Promise.resolve(0).then(function(t){o.loop(t)})},t.prototype.loop=function(t){var e=this;return t<this.array.length?this.process(t,this.array,this.user).then(function(){setTimeout(function(){e.loop(t+1)},0)}):void 0},t}(),n=function(){function t(){}return t.addAll=function(){this.addArrayFind(),this.addStringEndsWith(),this.addStringEndsWith(),this.addAsyncForEach()},t.addAsyncForEach=function(){Array.prototype.asyncForEach||(Array.prototype.asyncForEach=function(t,n){var o=Object(this),i=new e;return i.forEach(o,t,n)})},t.addStringStartsWith=function(){String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t})},t.addStringEndsWith=function(){String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>n.length)&&(e=n.length),e-=t.length;var o=n.indexOf(t,e);return-1!==o&&o===e})},t.addArrayFind=function(){Array.prototype.find||(Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),o=n.length>>>0,i=arguments[1],r=0;o>r;r++)if(e=n[r],t.call(i,e,r,n))return e;return null})},t}();t.javascriptExtensions=n;var o=function(){function t(){}return t.isUndefinedOrNull=function(t){return void 0===t||null===t},t}();t.f$=o}(fastnet||(fastnet={}));var fastnet;!function(t){var e=function(){function t(){}return t.print=function(e){if(t.routeMessagesToVisualStudio)if(window.hasOwnProperty("Debug")){var n=window.Debug;n.writeln("[browser] "+e)}else console.log(e);else console.log(e)},t.routeMessagesToVisualStudio=!0,t}();t.debug=e}(fastnet||(fastnet={}));var fastnet;!function(t){var e=function(){function t(){this.overlay="<div class='block-overlay'>                        \n            <div class='indicator'>\n                <div class='message'></div>\n                <div class='animation'><i class=\"fa fa-gear fa-spin fa-3x\"></i></div>\n            </div>\n         </div>"}return t.prototype.block=function(e){if(!t.isBlocked){var n=document.createElement("div");if(n.innerHTML=this.overlay,document.body.appendChild(n),void 0!==e){var o=n.getElementsByClassName("message");o.item(0).innerHTML=e}t.isBlocked=!0}},t.prototype.unBlock=function(){var e=document.querySelector(".block-overlay").parentElement;e.parentElement.removeChild(e),t.isBlocked=!1},t.isBlocked=!1,t}();t.busyIndicator=e}(fastnet||(fastnet={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},collections;!function(t){function e(t,e){return e>t?-1:t===e?0:1}function n(t,e){return t===e}function o(e){return null===e?"COLLECTION_NULL":t.isUndefined(e)?"COLLECTION_UNDEFINED":t.isString(e)?"$s"+e:"$o"+e.toString()}function i(e,n){if(void 0===n&&(n=","),null===e)return"COLLECTION_NULL";if(t.isUndefined(e))return"COLLECTION_UNDEFINED";if(t.isString(e))return e.toString();var o="{",i=!0;for(var r in e)p(e,r)&&(i?i=!1:o+=n,o=o+r+":"+e[r]);return o+"}"}function r(t){return"function"==typeof t}function s(t){return"undefined"==typeof t}function a(t){return"[object String]"===Object.prototype.toString.call(t)}function u(e){return t.isFunction(e)?function(t,n){return-1*e(t,n)}:function(t,e){return e>t?1:t===e?0:-1}}function l(t){return function(e,n){return 0===t(e,n)}}var c=Object.prototype.hasOwnProperty,p=function(t,e){return c.call(t,e)};t.defaultCompare=e,t.defaultEquals=n,t.defaultToString=o,t.makeString=i,t.isFunction=r,t.isUndefined=s,t.isString=a,t.reverseCompareFunction=u,t.compareToEquals=l;var d;!function(e){function n(e,n,o){for(var i=o||t.defaultEquals,r=e.length,s=0;r>s;s++)if(i(e[s],n))return s;return-1}function o(e,n,o){for(var i=o||t.defaultEquals,r=e.length,s=r-1;s>=0;s--)if(i(e[s],n))return s;return-1}function i(t,n,o){return e.indexOf(t,n,o)>=0}function r(t,n,o){var i=e.indexOf(t,n,o);return 0>i?!1:(t.splice(i,1),!0)}function s(e,n,o){for(var i=o||t.defaultEquals,r=e.length,s=0,a=0;r>a;a++)i(e[a],n)&&s++;return s}function a(e,n,o){var i=o||t.defaultEquals;if(e.length!==n.length)return!1;for(var r=e.length,s=0;r>s;s++)if(!i(e[s],n[s]))return!1;return!0}function u(t){return t.concat()}function l(t,e,n){if(0>e||e>=t.length||0>n||n>=t.length)return!1;var o=t[e];return t[e]=t[n],t[n]=o,!0}function c(t){return"["+t.toString()+"]"}function p(t,e){for(var n=t.length,o=0;n>o;o++)if(e(t[o])===!1)return}e.indexOf=n,e.lastIndexOf=o,e.contains=i,e.remove=r,e.frequency=s,e.equals=a,e.copy=u,e.swap=l,e.toString=c,e.forEach=p}(d=t.arrays||(t.arrays={}));var h=function(){function e(){this.firstNode=null,this.lastNode=null,this.nElements=0}return e.prototype.add=function(e,n){if(t.isUndefined(n)&&(n=this.nElements),0>n||n>this.nElements||t.isUndefined(e))return!1;var o=this.createNode(e);if(0===this.nElements)this.firstNode=o,this.lastNode=o;else if(n===this.nElements)this.lastNode.next=o,this.lastNode=o;else if(0===n)o.next=this.firstNode,this.firstNode=o;else{var i=this.nodeAtIndex(n-1);o.next=i.next,i.next=o}return this.nElements++,!0},e.prototype.first=function(){return null!==this.firstNode?this.firstNode.element:void 0},e.prototype.last=function(){return null!==this.lastNode?this.lastNode.element:void 0},e.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);return null===e?void 0:e.element},e.prototype.indexOf=function(e,n){var o=n||t.defaultEquals;if(t.isUndefined(e))return-1;for(var i=this.firstNode,r=0;null!==i;){if(o(i.element,e))return r;r++,i=i.next}return-1},e.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},e.prototype.remove=function(e,n){var o=n||t.defaultEquals;if(this.nElements<1||t.isUndefined(e))return!1;for(var i=null,r=this.firstNode;null!==r;){if(o(r.element,e))return r===this.firstNode?(this.firstNode=this.firstNode.next,r===this.lastNode&&(this.lastNode=null)):r===this.lastNode?(this.lastNode=i,i.next=r.next,r.next=null):(i.next=r.next,r.next=null),this.nElements--,!0;i=r,r=r.next}return!1},e.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},e.prototype.equals=function(e,n){var o=n||t.defaultEquals;return e instanceof t.LinkedList?this.size()!==e.size()?!1:this.equalsAux(this.firstNode,e.firstNode,o):!1},e.prototype.equalsAux=function(t,e,n){for(;null!==t;){if(!n(t.element,e.element))return!1;t=t.next,e=e.next}return!0},e.prototype.removeElementAtIndex=function(t){if(0>t||t>=this.nElements)return void 0;var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(t-1);null===n?(e=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=n),null!==n&&(e=n.next.element,n.next=n.next.next)}return this.nElements--,e},e.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&t(e.element)!==!1;)e=e.next},e.prototype.reverse=function(){for(var t=null,e=this.firstNode,n=null;null!==e;)n=e.next,e.next=t,t=e,e=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},e.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){return t.arrays.toString(this.toArray())},e.prototype.nodeAtIndex=function(t){if(0>t||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,n=0;t>n;n++)e=e.next;return e},e.prototype.createNode=function(t){return{element:t,next:null}},e}();t.LinkedList=h;var f=function(){function e(e){this.table={},this.nElements=0,this.toStr=e||t.defaultToString}return e.prototype.getValue=function(e){var n=this.table["$"+this.toStr(e)];return t.isUndefined(n)?void 0:n.value},e.prototype.setValue=function(e,n){if(t.isUndefined(e)||t.isUndefined(n))return void 0;var o,i="$"+this.toStr(e),r=this.table[i];return t.isUndefined(r)?(this.nElements++,o=void 0):o=r.value,this.table[i]={key:e,value:n},o},e.prototype.remove=function(e){var n="$"+this.toStr(e),o=this.table[n];return t.isUndefined(o)?void 0:(delete this.table[n],this.nElements--,o.value)},e.prototype.keys=function(){var t=[];for(var e in this.table)if(p(this.table,e)){var n=this.table[e];t.push(n.key)}return t},e.prototype.values=function(){var t=[];for(var e in this.table)if(p(this.table,e)){var n=this.table[e];t.push(n.value)}return t},e.prototype.forEach=function(t){for(var e in this.table)if(p(this.table,e)){var n=this.table[e],o=t(n.key,n.value);if(o===!1)return}},e.prototype.containsKey=function(e){return!t.isUndefined(this.getValue(e))},e.prototype.clear=function(){this.table={},this.nElements=0},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return this.nElements<=0},e.prototype.toString=function(){var t="{";return this.forEach(function(e,n){t=t+"\n	"+e.toString()+" : "+n.toString()}),t+"\n}"},e}();t.Dictionary=f;var m=function(){function t(t,e){this.key=t,this.value=e}return t.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},t}(),v=function(e){function n(t){e.call(this,t),this.head=new m(null,null),this.tail=new m(null,null),this.head.next=this.tail,this.tail.prev=this.head}return __extends(n,e),n.prototype.appendToTail=function(t){var e=this.tail.prev;e.next=t,t.prev=e,t.next=this.tail,this.tail.prev=t},n.prototype.getLinkedDictionaryPair=function(e){if(t.isUndefined(e))return void 0;var n="$"+this.toStr(e),o=this.table[n];return o},n.prototype.getValue=function(e){var n=this.getLinkedDictionaryPair(e);return t.isUndefined(n)?void 0:n.value},n.prototype.remove=function(n){var o=this.getLinkedDictionaryPair(n);return t.isUndefined(o)?void 0:(e.prototype.remove.call(this,n),o.unlink(),o.value)},n.prototype.clear=function(){e.prototype.clear.call(this),this.head.next=this.tail,this.tail.prev=this.head},n.prototype.replace=function(t,e){var n="$"+this.toStr(e.key);e.next=t.next,e.prev=t.prev,this.remove(t.key),e.prev.next=e,e.next.prev=e,this.table[n]=e,++this.nElements},n.prototype.setValue=function(e,n){if(t.isUndefined(e)||t.isUndefined(n))return void 0;var o=this.getLinkedDictionaryPair(e),i=new m(e,n),r="$"+this.toStr(e);return t.isUndefined(o)?(this.appendToTail(i),this.table[r]=i,void++this.nElements):(this.replace(o,i),o.value)},n.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(e)}),t},n.prototype.values=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),t},n.prototype.forEach=function(t){for(var e=this.head.next;null!=e.next;){var n=t(e.key,e.value);if(n===!1)return;e=e.next}},n}(f);t.LinkedDictionary=v;var y=function(){function e(e,n,o){void 0===o&&(o=!1),this.dict=new f(e),this.equalsF=n||t.defaultEquals,this.allowDuplicate=o}return e.prototype.getValue=function(e){var n=this.dict.getValue(e);return t.isUndefined(n)?[]:t.arrays.copy(n)},e.prototype.setValue=function(e,n){if(t.isUndefined(e)||t.isUndefined(n))return!1;if(!this.containsKey(e))return this.dict.setValue(e,[n]),!0;var o=this.dict.getValue(e);return!this.allowDuplicate&&t.arrays.contains(o,n,this.equalsF)?!1:(o.push(n),!0)},e.prototype.remove=function(e,n){if(t.isUndefined(n)){var o=this.dict.remove(e);return!t.isUndefined(o)}var i=this.dict.getValue(e);return t.arrays.remove(i,n,this.equalsF)?(0===i.length&&this.dict.remove(e),!0):!1},e.prototype.keys=function(){return this.dict.keys()},e.prototype.values=function(){for(var t=this.dict.values(),e=[],n=0;n<t.length;n++)for(var o=t[n],i=0;i<o.length;i++)e.push(o[i]);return e},e.prototype.containsKey=function(t){return this.dict.containsKey(t)},e.prototype.clear=function(){this.dict.clear()},e.prototype.size=function(){return this.dict.size()},e.prototype.isEmpty=function(){return this.dict.isEmpty()},e}();t.MultiDictionary=y;var g=function(){function e(e){this.data=[],this.compare=e||t.defaultCompare}return e.prototype.leftChildIndex=function(t){return 2*t+1},e.prototype.rightChildIndex=function(t){return 2*t+2},e.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},e.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},e.prototype.siftUp=function(e){for(var n=this.parentIndex(e);e>0&&this.compare(this.data[n],this.data[e])>0;)t.arrays.swap(this.data,n,e),e=n,n=this.parentIndex(e)},e.prototype.siftDown=function(e){for(var n=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e));n>=0&&this.compare(this.data[e],this.data[n])>0;)t.arrays.swap(this.data,n,e),e=n,n=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e))},e.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},e.prototype.add=function(e){return t.isUndefined(e)?void 0:(this.data.push(e),this.siftUp(this.data.length-1),!0)},e.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}return void 0},e.prototype.contains=function(e){var n=t.compareToEquals(this.compare);return t.arrays.contains(this.data,e,n)},e.prototype.size=function(){return this.data.length},e.prototype.isEmpty=function(){return this.data.length<=0},e.prototype.clear=function(){this.data.length=0},e.prototype.forEach=function(e){t.arrays.forEach(this.data,e)},e}();t.Heap=g;var b=function(){function t(){this.list=new h}return t.prototype.push=function(t){return this.list.add(t,0)},t.prototype.add=function(t){return this.list.add(t,0)},t.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.prototype.peek=function(){return this.list.first()},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.isEmpty()},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();t.Stack=b;var x=function(){function t(){this.list=new h}return t.prototype.enqueue=function(t){return this.list.add(t)},t.prototype.add=function(t){return this.list.add(t)},t.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}return void 0},t.prototype.peek=function(){return 0!==this.list.size()?this.list.first():void 0},t.prototype.size=function(){return this.list.size()},t.prototype.contains=function(t,e){return this.list.contains(t,e)},t.prototype.isEmpty=function(){return this.list.size()<=0},t.prototype.clear=function(){this.list.clear()},t.prototype.forEach=function(t){this.list.forEach(t)},t}();t.Queue=x;var E=function(){function e(e){this.heap=new g(t.reverseCompareFunction(e))}return e.prototype.enqueue=function(t){return this.heap.add(t)},e.prototype.add=function(t){return this.heap.add(t)},e.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}return void 0},e.prototype.peek=function(){return this.heap.peek()},e.prototype.contains=function(t){return this.heap.contains(t)},e.prototype.isEmpty=function(){return this.heap.isEmpty()},e.prototype.size=function(){return this.heap.size()},e.prototype.clear=function(){this.heap.clear()},e.prototype.forEach=function(t){this.heap.forEach(t)},e}();t.PriorityQueue=E;var C=function(){function e(t){this.dictionary=new f(t)}return e.prototype.contains=function(t){return this.dictionary.containsKey(t)},e.prototype.add=function(e){return this.contains(e)||t.isUndefined(e)?!1:(this.dictionary.setValue(e,e),!0)},e.prototype.intersection=function(t){var e=this;this.forEach(function(n){return t.contains(n)||e.remove(n),!0})},e.prototype.union=function(t){var e=this;t.forEach(function(t){return e.add(t),!0})},e.prototype.difference=function(t){var e=this;t.forEach(function(t){return e.remove(t),!0})},e.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach(function(n){return t.contains(n)?!0:(e=!1,!1)}),e},e.prototype.remove=function(t){return this.contains(t)?(this.dictionary.remove(t),!0):!1},e.prototype.forEach=function(t){this.dictionary.forEach(function(e,n){return t(n)})},e.prototype.toArray=function(){return this.dictionary.values()},e.prototype.isEmpty=function(){return this.dictionary.isEmpty()},e.prototype.size=function(){return this.dictionary.size()},e.prototype.clear=function(){this.dictionary.clear()},e.prototype.toString=function(){return t.arrays.toString(this.toArray())},e}();t.Set=C;var k=function(){function e(e){this.toStrF=e||t.defaultToString,this.dictionary=new f(this.toStrF),this.nElements=0}return e.prototype.add=function(e,n){if(void 0===n&&(n=1),t.isUndefined(e)||0>=n)return!1;if(this.contains(e))this.dictionary.getValue(e).copies+=n;else{var o={value:e,copies:n};this.dictionary.setValue(e,o)}return this.nElements+=n,!0},e.prototype.count=function(t){return this.contains(t)?this.dictionary.getValue(t).copies:0},e.prototype.contains=function(t){return this.dictionary.containsKey(t)},e.prototype.remove=function(e,n){if(void 0===n&&(n=1),t.isUndefined(e)||0>=n)return!1;if(this.contains(e)){var o=this.dictionary.getValue(e);return this.nElements-=n>o.copies?o.copies:n,o.copies-=n,o.copies<=0&&this.dictionary.remove(e),!0}return!1},e.prototype.toArray=function(){for(var t=[],e=this.dictionary.values(),n=e.length,o=0;n>o;o++)for(var i=e[o],r=i.value,s=i.copies,a=0;s>a;a++)t.push(r);return t},e.prototype.toSet=function(){for(var t=new C(this.toStrF),e=this.dictionary.values(),n=e.length,o=0;n>o;o++){var i=e[o].value;t.add(i)}return t},e.prototype.forEach=function(t){this.dictionary.forEach(function(e,n){for(var o=n.value,i=n.copies,r=0;i>r;r++)if(t(o)===!1)return!1;return!0})},e.prototype.size=function(){return this.nElements},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},e}();t.Bag=k;var w=function(){function e(e){this.root=null,this.compare=e||t.defaultCompare,this.nElements=0}return e.prototype.add=function(e){return t.isUndefined(e)?!1:null!==this.insertNode(this.createNode(e))?(this.nElements++,!0):!1},e.prototype.clear=function(){this.root=null,this.nElements=0},e.prototype.isEmpty=function(){return 0===this.nElements},e.prototype.size=function(){return this.nElements},e.prototype.contains=function(e){return t.isUndefined(e)?!1:null!==this.searchNode(this.root,e)},e.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null===e?!1:(this.removeNode(e),this.nElements--,!0)},e.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},e.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},e.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},e.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},e.prototype.minimum=function(){return this.isEmpty()?void 0:this.minimumAux(this.root).element},e.prototype.maximum=function(){return this.isEmpty()?void 0:this.maximumAux(this.root).element},e.prototype.forEach=function(t){this.inorderTraversal(t)},e.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(e){return t.push(e),!0}),t},e.prototype.height=function(){return this.heightAux(this.root)},e.prototype.searchNode=function(t,e){for(var n=null;null!==t&&0!==n;)n=this.compare(e,t.element),0>n?t=t.leftCh:n>0&&(t=t.rightCh);return t},e.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},e.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},e.prototype.inorderTraversalAux=function(t,e,n){null===t||n.stop||(this.inorderTraversalAux(t.leftCh,e,n),n.stop||(n.stop=e(t.element)===!1,n.stop||this.inorderTraversalAux(t.rightCh,e,n)))},e.prototype.levelTraversalAux=function(t,e){var n=new x;for(null!==t&&n.enqueue(t);!n.isEmpty();){if(t=n.dequeue(),e(t.element)===!1)return;null!==t.leftCh&&n.enqueue(t.leftCh),null!==t.rightCh&&n.enqueue(t.rightCh)}},e.prototype.preorderTraversalAux=function(t,e,n){null===t||n.stop||(n.stop=e(t.element)===!1,n.stop||(this.preorderTraversalAux(t.leftCh,e,n),n.stop||this.preorderTraversalAux(t.rightCh,e,n)))},e.prototype.postorderTraversalAux=function(t,e,n){null===t||n.stop||(this.postorderTraversalAux(t.leftCh,e,n),n.stop||(this.postorderTraversalAux(t.rightCh,e,n),n.stop||(n.stop=e(t.element)===!1)))},e.prototype.minimumAux=function(t){for(;null!==t.leftCh;)t=t.leftCh;return t},e.prototype.maximumAux=function(t){for(;null!==t.rightCh;)t=t.rightCh;return t},e.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},e.prototype.insertNode=function(t){for(var e=null,n=this.root,o=null;null!==n;){if(o=this.compare(t.element,n.element),0===o)return null;0>o?(e=n,n=n.leftCh):(e=n,n=n.rightCh)}return t.parent=e,null===e?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},e.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},e}();t.BSTree=w}(collections||(collections={}));var fastnet;!function(t){var e=function(){function t(){}return t.toDate=function(t){if(t instanceof Date)return t;var e;return e="string"==typeof t?this.toMoment(t):t,e.toDate()},t.toMoment=function(e){return"string"==typeof e?e.length>=19&&10===e.indexOf("T")?moment(e):moment(e,t.stdDateFormat):moment(e)},t.toDateString=function(e){var n;return n="string"==typeof e?this.toMoment(e):e instanceof Date?moment(e):e,n.format(t.stdDateFormat)},t.toDateTimeString=function(e){var n;return n="string"==typeof e?this.toMoment(e):e instanceof Date?moment(e):e,n.format(t.stdDateTimeFormat)},t.toDateTimeSecString=function(e){var n;return n="string"==typeof e?this.toMoment(e):e instanceof Date?moment(e):e,n.format(t.stdDateTimeSecFormat)},t.stdDateFormat="DDMMMYYYY",t.stdDateTimeFormat="DDMMMYYYY HH:mm",t.stdDateTimeSecFormat="DDMMMYYYY HH:mm:ss",t}();t.date=e}(fastnet||(fastnet={}));var fastnet;!function(t){var e=function(){function t(){}return t}();t.dataResult=e;var n=function(){function n(){}return n.init=function(){var t=$("head base").attr("href");this.rootUrl=t,$(document).ajaxError(this.ajaxError)},n.Get=function(n,o){void 0===o&&(o=!1);var i=!0;void 0!==n.cache&&n.cache===!1&&(i=n.cache);var r=o?n.url:this.rootUrl+n.url;return new Promise(function(n,o){$.ajax({url:r,contentType:"application/json",type:"GET",cache:i}).fail(function(e,n,i){t.debug.print("GET Query: "+r+" failed: status "+n+", error "+i),o(i)}).done(function(o,i,s){var a=null;o instanceof e?a=o:(a=new e,a.data=o,a.success=!0,a.message=a.exceptionMessage=null),o.success||t.debug.print("GET Query: "+r+" dataResult failed: message "+o.message+", exceptio "+o.exceptionMessage),n(o)})})},n.Post=function(n,o){void 0===o&&(o=!1);var i=o?n.url:this.rootUrl+n.url;return new Promise(function(o,r){$.ajax({url:i,contentType:"application/json; charset=UTF-8",type:"POST",data:JSON.stringify(n.data)}).fail(function(e,n,o){t.debug.print("POST Query: "+i+" failed: status "+n+", error "+o),r(o)}).done(function(n,r,s){var a=null;null===n||n instanceof e?a=n:(a=new e,a.data=n,a.success=!0,a.message=a.exceptionMessage=null),n.success||t.debug.print("POST Query: "+i+" dataResult failed: message "+n.message+", exceptio "+n.exceptionMessage),o(n)})})},n.ajaxError=function(e,n,o,i){var r='Internal error\nCall to "'+o.url+'" failed: '+i;t.debug.print(r),alert(r)},n.rootUrl="/",n}();t.ajax=n}(fastnet||(fastnet={}));var fastnet;!function(t){var e=function(){function e(){}return e.fetch=function(e){return new Promise(function(n,o){t.ajax.Get({url:"template/get/"+e}).then(function(t){t.success?n(t.data):o(t.exceptionMessage)})})},e}();t.template=e}(fastnet||(fastnet={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},fastnet;!function(t){var e=function(){function t(){this.model=ko.observable(null)}return t}();t.koContainer=e;var n=function(){function e(){}return e.isBound=function(t){var n=e.findElementIndex(t);return n>=0},e.findElementIndex=function(t){var n=-1,o=$(t);return $.each(e.boundElements,function(t,e){return o.is($(e))?(n=t,!1):void 0}),n},e.removeElement=function(t){var n=e.findElementIndex(t);-1!==n&&e.boundElements.splice(n,1)},e.unBind=function(n){var o=t.toJQuery(n).get(0);e.isBound(o)&&(ko.cleanNode(o),e.removeElement(o))},e.bind=function(n,o){var i=t.toJQuery(o).get(0);e.isBound(i)&&e.unBind(i),ko.applyBindings(n,i),e.boundElements.push(i)},e.clear=function(){$.each(e.boundElements,function(t,e){ko.cleanNode(e)}),e.boundElements=[]},e.initialiseValidation=function(){ko.validation.init({errorsAsTitle:!1,decorateInputElement:!0,errorElementClass:"validation-error"})},e.addStandardAdditionalValidationRules=function(){ko.validation.rules.exclusionList={validator:function(t,e){var n=e.find(function(e){return e===t});return null===n},message:"This item already exists"},ko.validation.registerExtenders()},e.boundElements=[],e}();t.koHelper=n;var o=function(){function t(t){this.tagName=t.toLowerCase()}return t.prototype.register=function(){ko.components.register(this.tagName,this.getComponentConfig())},t.prototype.getComponentConfig=function(){return{viewModel:this.getViewModel(),template:this.getTemplate()}},t.prototype.getTemplate=function(){return null},t.prototype.getViewModel=function(){return null},t}();t.elementTag=o;var i=function(t){function e(e,n,o,i){void 0===i&&(i=null),t.call(this,e),this.downClass=n,this.upClass=o,this.defaultLabel=i}return __extends(e,t),e.prototype.getTemplate=function(){return"<span data-bind='attr: { class : getClass()}'></span><!-- ko if hasLabel --><span class='label' data-bind='text: label'></span><!-- /ko -->"},e.prototype.createViewModel=function(t,e){var n=!1,o=$(e.element).attr("data-group");void 0!==o&&(n=!0),ko.utils.domNodeDisposal.addDisposeCallback(e.element,function(){ko.dataFor($(e.element).children()[0])});var i=t.hasOwnProperty("label")?ko.unwrap(t.label):this.defaultLabel,r=t.hasOwnProperty("checked")?ko.unwrap(t.checked):!1;this.downClass=t.hasOwnProperty("down")?ko.unwrap(t.down):this.downClass,this.upClass=t.hasOwnProperty("up")?ko.unwrap(t.up):this.upClass;var s=new l(e.element,i,r,this.downClass,this.upClass);return n&&s.addToGroup(o),$(e.element).on("changeState",function(t,e){s.isChecked(e)}),s},e.prototype.getViewModel=function(){var t=this;return{createViewModel:function(e,n){return t.createViewModel(e,n)}}},e}(o);t.toggletag=i;var r=function(t){function e(){t.call(this,"check-box","fa-check-square-o","fa-square-o","no label")}return __extends(e,t),e}(i),s=function(t){function e(){t.call(this,"radio-button","fa-circle","fa-circle-o","no label")}return __extends(e,t),e}(i),a=function(t){function e(){t.call(this,"image-button","fa-question","fa-question fa-rotate-180")}return __extends(e,t),e}(i),u=function(){function e(t){this.element=t,this.key=0,this.key=e.count++}return e.init=function(){e.register(r),e.register(s),e.register(a)},e.register=function(t){var e=new t;e.register()},e.getVmForElement=function(t){return ko.dataFor(t)},e.prototype.handleEvent=function(t){},e.prototype.getIdent=function(){return this.element.tagName.toLowerCase()+"-"+this.key},e.prototype.dispose=function(){t.debug.print("disposing "+this.getIdent())},e.count=0,e.controlLoader={loadComponent:function(t,e,n){function o(t){n(!e.createTemplateForViewModel||!t.createViewModel||t.template&&t.template.length?t:{template:[],createViewModel:function(n,o){var i=t.createViewModel.call(this,n,o),r=e.createTemplateForViewModel.call(this,i,o);return"string"==typeof r&&(r=ko.utils.parseHtmlFragment(r)),ko.virtualElements.setDomNodeChildren(o.element,r),i}})}ko.components.defaultLoader.loadComponent(t,e,o)}},e}();t.elementViewModel=u;var l=function(e){function n(t,n,o,i,r){var s=this;e.call(this,t),this.downClass=i,this.upClass=r,this.groupName=null,this.label=null!==n?n.trim():null,this.hasLabel=null!==this.label&&this.label.length>0,this.isChecked=ko.observable(),this.isChecked.subscribe(function(t){s.setElementChecked(t)}),this.isChecked(o)}return __extends(n,e),n.prototype.setElementChecked=function(t){t?$(this.element).attr("checked","true"):$(this.element).removeAttr("checked")},n.prototype.getClass=function(){var e="image fa  "+(this.isChecked()?this.downClass:this.upClass)+" clickable",n=this.element.tagName.toLowerCase();return"radio-button"===n&&t.debug.print(this.element.tagName+" - "+this.getIdent()+": checked is "+this.isChecked()+", down class is "+this.downClass+" up class is "+this.upClass+", result is "+e),e},n.prototype.handleEvent=function(t){var e=this,o=this.isChecked();if(this.isChecked(!o),null!==this.groupName&&this.isChecked()&&n.groups.containsKey(this.groupName)){var i=n.groups.getValue(this.groupName);i.forEach(function(t){return t!==e&&t.isChecked(!1),!0})}},n.prototype.dispose=function(){null!==this.groupName&&this.removeFromGroup()},n.prototype.addToGroup=function(t){this.groupName=t.toLowerCase(),n.groups.containsKey(this.groupName)||n.groups.setValue(this.groupName,new collections.LinkedList),n.groups.getValue(this.groupName).add(this)},n.prototype.removeFromGroup=function(){if(null!==this.groupName&&n.groups.containsKey(this.groupName)){var t=n.groups.getValue(this.groupName);t.contains(this)&&(t.remove(this),0===t.size()&&n.groups.remove(this.groupName))}},n.groups=new collections.Dictionary,n}(u);t.toggleViewModel=l}(fastnet||(fastnet={}));var fastnet;!function(t){function e(t){var e=null;return e=n(t)?t:$(t instanceof Element?t:t)}function n(t){return void 0!==t.jquery&&"string"==typeof t.jquery}t.toJQuery=e,t.isJQuery=n}(fastnet||(fastnet={}));var fastnet;!function(t){function e(t){return void 0!==t.page&&void 0!==t.command&&void 0!==t.target&&t.target instanceof Element}t.isReceivedCommand=e,function(t){t[t.unknown=0]="unknown"}(t.commands||(t.commands={}));var n=t.commands,o=function(){function t(){}return t.prototype.disable=function(){i.disable(this.command)},t.prototype.enable=function(){i.enable(this.command)},t}();t.receivedCommand=o;var i=function(){function e(){}return e.detach=function(e){t.toJQuery(e).off()},e.attach=function(i,r){t.toJQuery(i).find("["+e.commandAttr+"]").addBack("["+e.commandAttr+"]").each(function(i,s){$(s).off(e.eventName).on(e.eventName,function(i){var s="",a=$(i.target).closest("["+e.pageAttr+"]");a.length>0&&(s=$(a).attr(e.pageAttr));var u=$(i.target).closest("["+e.commandAttr+"]").attr(e.commandAttr),l=n[u];void 0===l&&(l=n.unknown,t.debug.print("found unknown command: page = "+s+", commandName = "+u));var c=$(i.target).closest("["+e.commandAttr+"]").get(0),p=null;if(ko.components.isRegistered(c.tagName.toLowerCase())&&(p=ko.dataFor(i.target),p.handleEvent&&p.handleEvent(e.eventName)),null!==r){i.stopPropagation(),i.preventDefault();var d=new o;d.page=s,d.command=l,d.target=i.target,d.commandElement=c,d.viewModel=p,d.isComponent=null!==p,d.commandName=u,r(d)}})})},e.enable=function(t){var o="["+e.commandAttr+"='"+n[t]+"']";$(o).prop("disabled",!1)},e.disable=function(t){var o="["+e.commandAttr+"='"+n[t]+"']";$(o).prop("disabled",!0)},e.setCheckboxTool=function(e,n){
var o=t.toJQuery(e);n?o.addClass("checked"):o.removeClass("checked")},e.commandAttr="data-command",e.pageAttr="data-page",e.eventName="click.commands",e}();t.command=i}(fastnet||(fastnet={}));var fastnet;!function(t){var e;!function(t){t[t.debug=1]="debug",t[t.verbose=2]="verbose",t[t.information=3]="information",t[t.warning=4]="warning",t[t.error=5]="error",t[t.critical=6]="critical",t[t.none=65536]="none"}(e||(e={}));var n=function(){function n(){this.connection=null,this.url="/",this.registry=[],this.handlerNumber=0,this._printLogs=!1}return Object.defineProperty(n.prototype,"PrintLogs",{get:function(){return this._printLogs},set:function(t){this._printLogs=t},enumerable:!0,configurable:!0}),n.prototype.stop=function(){var t=this;$.each(this.registry,function(e,n){$.each(n.handlerList,function(e,o){t.removeHandler(n.messageType,o.id)})}),this.connection.stop()},n.prototype.start=function(n){var o=this,i=function(n){n.source=o.url;var i=n.messageType.toLowerCase();if("logmessage"===i){if(o.PrintLogs){var r=n,s=e[r.level];t.debug.print(r.source+" "+t.date.toDateTimeSecString(r.dateTimeUtc)+" "+s.substring(0,4).toUpperCase()+" ["+r.name+"]: "+r.text)}}else{var a=o.registry[i];void 0!==a&&$.each(a.handlerList,function(t,e){e.func(n)})}};return new Promise(function(e,r){try{if(void 0!==n){o.url=n;var s=$.hubConnection(n+"/signalr"),a=s.createHubProxy("messageHub");a.on("messageReceived",function(t){i(t)}),o.connection=s}else{var u=$.connection.messageHub;o.connection=$.connection.hub,u.client.messageReceived=function(t){i(t)}}o.connection.start({withCredentials:!1}).then(function(){t.debug.print(o.url+" message hub connected"),e()})}catch(l){r(l)}})},n.prototype.addHandler=function(t,e){t=t.toLowerCase();var n=this.registry[t];void 0===n&&(n={messageType:t,handlerList:[]},this.registry[t]=n);var o=++this.handlerNumber;return n.handlerList.push({func:e,id:o}),o},n.prototype.removeHandler=function(t,e){t=t.toLowerCase();var n=this.registry[t];if(void 0!==n){var o=-1;$.each(n.handlerList,function(t,n){return n.id===e?(o=t,!1):void 0}),o>=0&&n.handlerList.splice(o,1)}},n}();t.messageHub=n}(fastnet||(fastnet={}));var __extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},fastnet;!function(t){!function(t){t[t.cancelcommand=10100]="cancelcommand",t[t.okcommand=10101]="okcommand"}(t.commands||(t.commands={}));var e=t.commands,n=function(){function e(t){this.options=null,this.commandHandler=null;var n={modal:!0,caption:"(no caption)",classNames:null,onCommand:null,templateName:null,template:null,okButtonDisable:!1,okButtonCaption:"OK",cancelButtonDisable:!1,cancelButtonCaption:"Cancel",afterDisplay:null};this.options=$.extend({},n,t);var o=e.list.size();this.id="fastnet-form-"+o,e.list.setValue(this.id,this)}return Object.defineProperty(e.prototype,"Id",{get:function(){return this.id},enumerable:!0,configurable:!0}),e.prototype.display=function(e){var n=this,o=function(){t.f$.isUndefinedOrNull(n.options.classNames)===!1&&n.options.classNames.length>0&&$("#"+n.id).addClass(n.options.classNames),null!==n.options.afterDisplay&&n.options.afterDisplay(),t.command.attach("#"+n.id,function(t){n.onCommand(t)})};this.commandHandler=e,this.options.modal?this.openModal().then(function(){t.debug.print(n.id),o()}):t.debug.print("modeless form not implemented")},e.prototype.close=function(){t.command.detach("#"+this.id),e.list.remove(this.id),$("#"+this.id).remove(),0===e.list.size()&&$("body > #forms-container").hide()},e.prototype.getTemplate=function(){var t=this;return new Promise(function(e,n){e("<div class='form-modal' id='"+t.id+"'></div>")})},e.prototype.ensureContainer=function(){var t=$("body > #forms-container");if(0===t.length){var e="<div id='forms-container'></div>";$("body").append($(e)),t=$("body > #forms-container")}t.show()},e.prototype.openModal=function(){var t=this;return this.ensureContainer(),this.getTemplate().then(function(e){$("#forms-container").append($(e));var n=$("#"+t.id).get(0);t.interactable=interact(n),t.interactable.draggable({inertia:!0,restrict:{restriction:"parent",elementRect:{top:0,left:0,bottom:1,right:1}},autoScroll:!0,onmove:t.dragMoveListener}).resizable({edges:{left:!0,right:!0,bottom:!0,top:!0}}).on("resizemove",function(t){var e=t.target,n=parseFloat(e.getAttribute("data-x"))||0,o=parseFloat(e.getAttribute("data-y"))||0;e.style.width=t.rect.width+"px",e.style.height=t.rect.height+"px",n+=t.deltaRect.left,o+=t.deltaRect.top,e.style.webkitTransform=e.style.transform="translate("+n+"px,"+o+"px)",e.setAttribute("data-x",n),e.setAttribute("data-y",o)})})},e.prototype.onCommand=function(t){null!==this.commandHandler&&this.commandHandler(t)},e.prototype.dragMoveListener=function(t){var e=t.target,n=(parseFloat(e.getAttribute("data-x"))||0)+t.dx,o=(parseFloat(e.getAttribute("data-y"))||0)+t.dy;e.style.webkitTransform=e.style.transform="translate("+n+"px, "+o+"px)",e.setAttribute("data-x",n),e.setAttribute("data-y",o)},e.list=new collections.Dictionary,e}();t.baseForm=n;var o=function(n){function o(t){n.call(this,t),this.modelGroup=null,this.result=null,this.promise=null}return __extends(o,n),o.prototype.getTemplate=function(){var e=this,n="<div class='form-modal' id='"+this.id+"'></div>";return null!==this.options.templateName?t.template.fetch(this.options.templateName).then(function(t){return e.buildForm(n,t)}):new Promise(function(t,o){t(null!==e.options.template?e.buildForm(n,e.options.template):n)})},o.prototype.show=function(){var o=this;return this.promise=new Promise(function(i,r){o.resolver=i,n.prototype.display.call(o,function(n){var i=!1;switch(n.command){case e.okcommand:var r=!0;o.modelGroup.isValid()===!1&&(o.modelGroup.errors.showAllMessages(),r=!1),r&&(o.result=!0,i=!0);break;case e.cancelcommand:o.result=!1,i=!0}(n.command!==e.okcommand||i===!0)&&(null===o.options.onCommand?t.debug.print("form "+o.id+": command "+n.commandName+", no onCommand handler provided"):o.options.onCommand(n)),i&&o.close()})}),this.promise},o.prototype.close=function(){t.koHelper.unBind("#forms-container #"+this.Id),n.prototype.close.call(this),this.resolver(this.result)},o.prototype.bindModel=function(e,n){void 0===n&&(n=!0),n&&(this.modelGroup=ko.validatedObservable(e)),t.koHelper.bind(e,"#forms-container #"+this.Id)},o.prototype.isValid=function(){return null===this.modelGroup?!0:this.modelGroup.isValid()},o.prototype.getErrors=function(){return(null===this.modelGroup?!0:this.modelGroup.isValid())?[]:this.modelGroup.errors()},o.prototype.buildForm=function(t,e){var n=null,o=/<[a-z][\s\S]*>/;n=o.test(this.options.caption)?$(this.options.caption):$("<span></span>").text(this.options.caption);var i=$(t).addClass("form").append($("<div class='caption-bar'></div>")).append($("<div class='form-body'></div>")).append($("<div class='command-bar'><span data-command='okcommand' class='btn btn-confirm btn-small'>"+this.options.okButtonCaption+"</span><span data-command='cancelcommand' class='btn btn-cancel btn-small'>"+this.options.cancelButtonCaption+"</span></div>"));return i.find(".caption-bar").append(n),i.find(".form-body").append($(e)),this.options.cancelButtonDisable?i.find("span[data-command='cancelcommand']").hide():null!==this.options.cancelButtonCaption&&i.find("span[data-command='cancelcommand']").text(this.options.cancelButtonCaption),this.options.okButtonDisable?i.find("span[data-command='okcommand']").hide():null!==this.options.okButtonCaption&&i.find("span[data-command='okcommand']").text(this.options.okButtonCaption),this.options.cancelButtonDisable&&this.options.okButtonDisable&&i.find(".command-bar").hide(),i.get(0).outerHTML},o}(n);t.form=o;var i=function(t){function n(e){void 0===e&&(e={caption:"Message",template:"<span>no message body<span>"}),t.call(this,e),(void 0===e.caption||null===e.caption)&&(e.caption="Message"),(void 0===e.template||null===e.template)&&(e.template="<span>no message body<span>")}return __extends(n,t),n.prototype.getTemplate=function(){var e=this;return new Promise(function(n,o){t.prototype.getTemplate.call(e).then(function(t){var e=$(t).removeClass("form").addClass("message-box");e.find(".form-body").removeClass("form-body").addClass("message-body"),n(e.get(0).outerHTML)})})},n.prototype.show=function(){var n=this;return this.promise=new Promise(function(o,i){n.resolver=o,t.prototype.display.call(n,function(t){switch(t.command){case e.okcommand:n.result=!0}n.close()})}),this.promise},n}(o);t.messageBox=i}(fastnet||(fastnet={}));
